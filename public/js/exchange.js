"undefined"==typeof public&&(public={}),public.exchange={init:function(){$("form#exchange-outin, form#exchange-outadv, form#exchange-advin").on("input",'input[name="amount"]',function(){var e=Number($(this).closest("form").attr("data-comission")),n=Number($(this).val());e&&(n-=n*(e/100)),$(this).closest("form").find('input[name="getamount"]').val(core.main.num(n,2,"."," ",!1)+" "+lang.rub)}),$("form#exchange-outin").on("submit",function(){public.exchange.outin()}),$("form#exchange-outadv").on("submit",function(){public.exchange.outadv()}),$("form#exchange-advin").on("submit",function(){public.exchange.advin()})},outin:function(e){core.ajax({url:"/exchange/outin/code/"+(e||0),ident:"outin",preloader:"form#exchange-outin button",form:"form#exchange-outin",success:function(e){if(e&&e.code)return swal({title:lang["enter-code"],text:lang["enter-code-text"],input:"text",inputAttributes:{maxlength:4,autocomplete:"off",placeholder:lang["enter-code-plr"],required:!0},showCancelButton:!0,confirmButtonText:lang["btn-continue"],cancelButtonText:lang["btn-close"]}).then(function(e){e.value&&public.exchange.outin(e.value)});if(e&&e.error)return swal({type:"error",text:e.error});if(e&&e.balance)for(var n in e.balance)$('[data-balance="'+n+'"]').html(core.main.num(e.balance[n],2,"."," ",!1));return e&&e.success?($('form#exchange-outin input[name="amount"]').val(""),$('form#exchange-outin input[name="getamount"]').val("0.00 "+lang.rub),swal({type:"success",text:e.success})):void 0}})},outadv:function(e){core.ajax({url:"/exchange/outadv/code/"+(e||0),ident:"outadv",preloader:"form#exchange-outadv button",form:"form#exchange-outadv",success:function(e){if(e&&e.code)return swal({title:lang["enter-code"],text:lang["enter-code-text"],input:"text",inputAttributes:{maxlength:4,autocomplete:"off",placeholder:lang["enter-code-plr"],required:!0},showCancelButton:!0,confirmButtonText:lang["btn-continue"],cancelButtonText:lang["btn-close"]}).then(function(e){e.value&&public.exchange.outadv(e.value)});if(e&&e.error)return swal({type:"error",text:e.error});if(e&&e.balance)for(var n in e.balance)$('[data-balance="'+n+'"]').html(core.main.num(e.balance[n],2,"."," ",!1));return e&&e.success?($('form#exchange-outadv input[name="amount"]').val(""),$('form#exchange-outadv input[name="getamount"]').val("0.00 "+lang.rub),swal({type:"success",text:e.success})):void 0}})},advin:function(e){core.ajax({url:"/exchange/advin/code/"+(e||0),ident:"advin",preloader:"form#exchange-advin button",form:"form#exchange-advin",success:function(e){if(e&&e.code)return swal({title:lang["enter-code"],text:lang["enter-code-text"],input:"text",inputAttributes:{maxlength:4,autocomplete:"off",placeholder:lang["enter-code-plr"],required:!0},showCancelButton:!0,confirmButtonText:lang["btn-continue"],cancelButtonText:lang["btn-close"]}).then(function(e){e.value&&public.exchange.advin(e.value)});if(e&&e.error)return swal({type:"error",text:e.error});if(e&&e.balance)for(var n in e.balance)$('[data-balance="'+n+'"]').html(core.main.num(e.balance[n],2,"."," ",!1));return e&&e.success?($('form#exchange-outadv input[name="amount"]').val(""),$('form#exchange-outadv input[name="getamount"]').val("0.00 "+lang.rub),swal({type:"success",text:e.success})):void 0}})}},$(document).ready(function(){public.exchange.init()});
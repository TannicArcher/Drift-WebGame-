"undefined"==typeof public&&(public={}),public.lottery={init:function(){$('.dt-content .row .lottery-winner [data-action="take"]').on("click",function(){public.lottery.take()});var t=parseInt(global.upd);t<1e3&&(t=1e3),core.timeout.set(function(){public.lottery.upd()},t,"upd"),core.timeout.set(function(){public.lottery.upd()},6e4,"upd")},take:function(){core.ajax({url:"/lottery/take",ident:"take",preloader:'.dt-content .row .lottery-winner button[data-action="take"]',success:function(t){if(t&&t.error)return swal({type:"error",text:t.error});t&&t.success&&(public.lottery.creation(t),swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})({type:"success",title:t.success}))}})},upd:function(){core.ajax({url:"/lottery/data",ident:"upd",success:function(t){public.lottery.creation(t)},complete:function(){core.timeout.set(function(){public.lottery.upd()},6e4,"upd")}})},creation:function(t){if(void 0!==t.lottery[1]&&void 0!==t.lottery[1].login&&t.lottery[1].login?($('[data-lottery="winner"] a').attr("href","/profile/"+t.lottery[1].login).html(t.lottery[1].login),$('[data-lottery="winner-count"]').html(t.lottery[1].users),$('[data-lottery="winner"]').show()):$('[data-lottery="winner"]').hide(),$('[data-lottery="id"]').html(t.lottery[0].id),t.personal?$('.dt-content .row .lottery-winner [data-action="take"]').removeClass("btn-primary").addClass("btn-dark").prop("disabled",!0).html(lang.participate):$('.dt-content .row .lottery-winner [data-action="take"]').removeClass("btn-dark").addClass("btn-primary").prop("disabled",!1).html(lang["go-participate"]),$('[data-lottery="expires"]').html(t.lottery[0]["expires-display"]),t["last-users-list"]){var e="";for(var r in t["last-users-list"])e+="\t\t\t\t\t<tr>\t\t\t\t\t\t<td>"+t["last-users-list"][r].login+"</td>\t\t\t\t\t\t<td>"+t["last-users-list"][r]["datetime-display"]+"</td>\t\t\t\t\t</tr>\t\t\t\t";$('[data-lottery="last-users-list"]').html(e)}else $('[data-lottery="last-users-list"]').html('<tr><td colspan="2" class="text-center no-data">'+lang["not-users"]+"</td></tr>");if(t.lottery){var l=1;e="";for(var r in t.lottery){if(l<20){var o='<a href="javascript:void(0)" data-toggle="modal" data-target="#lottery-results">'+lang.results+"</a>";0==t.lottery[r].status&&(o=lang.active),e+="\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t<td>"+t.lottery[r].id+"</td>\t\t\t\t\t\t\t<td>"+t.lottery[r]["expires-display"]+"</td>\t\t\t\t\t\t\t<td>"+o+"</td>\t\t\t\t\t\t</tr>\t\t\t\t\t"}l++}$('[data-lottery="last-lottery-list"]').html(e)}if(t.lottery){l=1,e="";for(var r in t.lottery){if(l<20&&0!=t.lottery[r].status){var a=lang.empty;t.lottery[r].login&&(a='<a href="/profile/'+t.lottery[r].login+'" target="_blank">'+t.lottery[r].login+"</a>"),e+="\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t<td>"+t.lottery[r].id+"</td>\t\t\t\t\t\t\t<td>"+t.lottery[r]["datetime-display"]+"</td>\t\t\t\t\t\t\t<td>"+t.lottery[r]["expires-display"]+"</td>\t\t\t\t\t\t\t<td>"+t.lottery[r].users+"</td>\t\t\t\t\t\t\t<td>"+a+"</td>\t\t\t\t\t\t\t<td>"+global.lang.prize+"</td>\t\t\t\t\t\t</tr>\t\t\t\t\t"}l++}$('[data-lottery="last-lottery-list-details"]').html(e)}}},$(document).ready(function(){public.lottery.init()});
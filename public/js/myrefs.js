"undefined"==typeof public&&(public={}),public.myrefs={init:function(){public.myrefs.load()},load:function(){core.ajax({url:"/refsys/list",ident:"list",preloader:"#data-table-myrefs-block",success:function(a){jQuery.extend(jQuery.fn.dataTableExt.oSort,{"ct-number-asc":function(a,e){return a=a.replace(/[^0-9.]/g,""),a=core.main.rtrim(a,"."),a=parseFloat(a),e=e.replace(/[^0-9.]/g,""),e=core.main.rtrim(e,"."),a<(e=parseFloat(e))?-1:e<a?1:0},"ct-number-desc":function(a,e){return a=a.replace(/[^0-9.]/g,""),a=core.main.rtrim(a,"."),a=parseFloat(a),e=e.replace(/[^0-9.]/g,""),e=core.main.rtrim(e,"."),a<(e=parseFloat(e))?1:e<a?-1:0},"ct-date-asc":function(a,e){if(""!==$.trim(a)){var t=null!=(n=$.trim(a).split(" "+lang.inside+" "))[1]?n[1].split(":"):[0,0,0];a=1*((l=n[0].split("."))[2]+l[1]+l[0]+t[0]+t[1]+(null!=t[2]?t[2]:0))}else a=1/0;if(""!==$.trim(e)){var n,l;t=null!=(n=$.trim(e).split(" "+lang.inside+" "))[1]?n[1].split(":"):[0,0,0];e=1*((l=n[0].split("."))[2]+l[1]+l[0]+t[0]+t[1]+(null!=t[2]?t[2]:0))}else e=1/0;return a-e},"ct-date-desc":function(a,e){if(""!==$.trim(a)){var t=null!=(n=$.trim(a).split(" "+lang.inside+" "))[1]?n[1].split(":"):[0,0,0];a=1*((l=n[0].split("."))[2]+l[1]+l[0]+t[0]+t[1]+(null!=t[2]?t[2]:0))}else a=1/0;if(""!==$.trim(e)){var n,l;t=null!=(n=$.trim(e).split(" "+lang.inside+" "))[1]?n[1].split(":"):[0,0,0];e=1*((l=n[0].split("."))[2]+l[1]+l[0]+t[0]+t[1]+(null!=t[2]?t[2]:0))}else e=1/0;return e-a}});var e=[];if(a)for(var t in a)e.push([a[t]["datetime-converted"],'<div class="dt-avatar-wrapper refs-userbox"><img class="dt-avatar" src="'+(a[t].avatar?"/media/images/avatar/sm/"+a[t].avatar:"/public/account/assets/images/avatars/avatar-none.png")+'"><div class="dt-avatar-info"><a href="/profile/'+a[t].login+'" target="_blank" class="dt-avatar-name">'+a[t].login+'</a><span class="user-id"><a class="cursor-pointer" data-placement="left" tabindex="0" data-trigger="hover" role="button" data-toggle="popover" title="'+lang.stats+" "+a[t].login+'" data-html="true" data-content="<b>'+lang.refs+":</b> "+a[t].refs+" "+lang.people+"<br><b>"+lang.fill+":</b> "+core.main.num(a[t].fill||0)+" "+lang.rub+"<br><b>"+lang.income+":</b> "+core.main.num(a[t].income||0,2,".")+" "+lang.rub+"<br><b>"+lang.refback+":</b> "+core.main.num(a[t]["stats-autorcb"]||0,2,".")+" "+lang.rub+"<br><br><b>"+lang.clicks+":</b> "+(a[t].settings&&a[t].settings["serf-sites-view"]?a[t].settings["serf-sites-view"]:0)+"<br><b>"+lang["clicks-income"]+":</b> "+(a[t].settings&&a[t].settings["serf-partner-rub"]?a[t].settings["serf-partner-rub"]:0)+" "+lang.rub+"<br><b>"+lang.source+":</b> "+(a[t].host||lang["not-defined"])+'">'+lang.stats+"</a></span></div></div>",'<span class="refs-count">'+a[t].refs+" <span>"+lang.people+"</span></span>",'<span class="refs-count">'+core.main.num(a[t].fill||0)+" <span>"+lang.rub+"</span></span>",'<span class="refs-count">'+core.main.num(a[t].income||0,2,".")+" <span>"+lang.rub+"</span></span>"]);if(public.myrefs.table)public.myrefs.table.clear(),public.myrefs.table.rows.add(e),public.myrefs.table.draw();else{var n=$("html[lang]").attr("lang"),l="//cdn.datatables.net/plug-ins/1.10.20/i18n/Russian.json";"en"==n?l="//cdn.datatables.net/plug-ins/1.10.20/i18n/English.json":"es"==n&&(l="//cdn.datatables.net/plug-ins/a5734b29083/i18n/Spanish.json"),public.myrefs.table=$("#data-table-myrefs").DataTable({dom:'<"html5buttons" B>lTfgitp',data:e,pageLength:10,order:[[0,"desc"]],drawCallback:function(){$('[data-toggle="popover"]').popover()},initComplete:function(){$('[data-toggle="popover"]').popover()},columns:[{title:lang.datetime,className:"fw-400 ls-50",type:"ct-date"},{title:lang.user},{title:lang.refs,className:"text-center",type:"ct-number"},{title:lang.fills,className:"text-center",type:"ct-number"},{title:lang.income,className:"text-center",type:"ct-number"}],language:{url:l}})}}})}},$(document).ready(function(){public.myrefs.init()});
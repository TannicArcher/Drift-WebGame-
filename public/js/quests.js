"undefined"==typeof public&&(public={}),public.quests={init:function(){$("#task-forum form button").on("click",function(){$(this).hasClass("btn-dark")||$(this).attr("disabled")||public.quests.request({id:1,preloader:$(this),form:"#task-forum form"})}),$("#task-video form button").on("click",function(){$(this).hasClass("btn-dark")||$(this).attr("disabled")||public.quests.request({id:2,preloader:$(this),form:"#task-video form"})}),$(".dt-content .row .tasks-item-box a[data-id]:not([data-target])").on("click",function(){$(this).hasClass("btn-dark")||$(this).attr("disabled")||public.quests.request({id:$(this).attr("data-id"),preloader:$(this)})})},request:function(a){core.ajax({url:"/quests/request/id/"+a.id,ident:"request",preloader:a.preloader,form:a.form||!1,success:function(t){if(t&&t.error)return swal({type:"error",text:t.error});if(t&&t.balance)for(var s in t.balance)$('[data-balance="'+s+'"]').html(core.main.num(t.balance[s],2,"."));t&&t.success&&($('.dt-content .row .tasks-item-box a[data-id="'+a.id+'"]').removeClass("btn-primary js-load").removeAttr("data-toggle data-target").addClass("btn-dark").attr("disabled",!0).html(lang.completed),$("#task-forum .close").click(),$("#task-video .close").click(),public.quests.requestList())}})},requestList:function(){core.ajax({url:"/quests/request-list",ident:"request-list",success:function(t){if(t){var s="";for(var a in t)s+="\t\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t\t<td>"+t[a].title+"</td>\t\t\t\t\t\t\t\t<td>"+t[a]["datetime-display"]+"</td>\t\t\t\t\t\t\t\t<td>"+t[a].amount+" "+lang.rub+"</td>\t\t\t\t\t\t\t\t<td>","0"==t[a].status?s+='<span class="text-warning fw-500">'+lang.checking+"</span>":"1"==t[a].status?s+='<span class="text-success fw-500">'+lang.approved+"</span>":"2"==t[a].status&&(s+='<span class="text-danger fw-500">'+lang.denied+"</span>"),s+="\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t";$('[data-section="tasks-request-list"]').html(s)}}})}},$(document).ready(function(){public.quests.init()});
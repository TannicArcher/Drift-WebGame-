"undefined"==typeof public&&(public={}),public.levels={init:function(){core.interval.set(function(){public.levels.income()},1e3,"income"),$('[data-section="collect"]').on("click",function(){public.levels.collect()}),$(".row.justify-content-center").on("click","[data-open]",function(){public.levels.open($(this).attr("data-open"))})},income:function(){var t=Number($("[data-levels-second]").attr("data-levels-second"));if(t){var a=Number($("[data-levels-balance]").attr("data-levels-balance")),e=parseInt($('[data-section="level-limit-max"]').html().replace(" ","")),l=core.main.num(a+t,4,".","",!1),n=Number($("[data-level-limit-current]").attr("data-level-limit-current"))+t;if(e<=n)return!1;var s=l.split(".");$("[data-levels-balance]").attr("data-levels-balance",a+t).html(s[0]+'.<span class="fs-60">'+s[1]+"</span>"),$("[data-level-limit-current]").attr("data-level-limit-current",n).html(core.main.num(n)),$(".dt-indicator-item__info.mt-3.w-100").attr("data-fill",n),$('[data-section="level-limit-line"]').css({width:n/e*100+"%"})}},collect:function(){core.ajax({url:"/levels/collect",ident:"collect",preloader:'[data-section="collect"]',success:function(t){if(t&&t.error)return swal({type:"error",text:t.error});if(t&&t.balance)for(var a in t.balance)$('[data-balance="'+a+'"]').html(core.main.num(t.balance[a],2,"."));t&&t.success&&($("[data-levels-balance]").attr("data-levels-balance",0).html('0.<span class="fs-60">0000</span>'),swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})({type:"success",title:t.success}))}})},open:function(e){e=Number(e),core.ajax({url:"/levels/open/level/"+e,ident:"open",preloader:'[data-open="'+e+'"]',success:function(t){if(t&&t.error)return swal({type:"error",text:t.error});if(t&&t.balance)for(var a in t.balance)$('[data-balance="'+a+'"]').html(core.main.num(t.balance[a],2,"."));t&&t.success&&($('[data-section="collect"]').removeAttr("disabled"),$('[data-open="'+e+'"]').removeClass("js-load").addClass("disabled").removeAttr("data-open").html(lang["level-open"]),$('[data-open="'+(e+1)+'"]').removeClass("disabled").attr("data-open",e+1),$("[data-levels-second]").attr("data-levels-second",t.info.second),$('[data-section="level-block"]').html('\t\t\t\t\t\t<div class="dt-zone-stats__content">\t\t\t\t\t\t\t<div class="dt-card__heading m-b-25 text-center">\t\t\t\t\t\t\t\t<h3 class="dt-card__title fw-500 m-b-5">'+lang["your-level"]+':</h3>\t\t\t\t\t\t\t\t<h3 class="dt-card__title fw-500">«'+t.name+'»</h3>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<img class="m-b-20 levels-car" src="/public/account/assets/images/levels/level-'+t.info.level+'.png" alt="'+t.name+'">\t\t\t\t\t\t</div>\t\t\t\t\t'),$('[data-section="level-payback"]').html('\t\t\t\t\t\t<div class="h4 mb-1 fw-500 f-oswald">'+t.income+'%<span class="fs-75"> '+lang["in-month-abr"]+'</span></div>\t\t\t\t\t\t<span class="desc">'+lang.payback+"</span>\t\t\t\t\t"),t["income-next"]&&$('[data-section="level-payback"]').append('\t\t\t\t\t\t\t<span class="d-block m-t-7">\t\t\t\t\t\t\t\t<span class="levels-profit" data-toggle="tooltip" data-placement="bottom" data-original-title="'+lang["payback-next"]+'"><i class="fal fa-long-arrow-up"></i> '+t["income-next"]+"%</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t"),$('[data-section="level-outlay"]').html('\t\t\t\t\t\t<div class="h4 mb-1 fw-500 f-oswald">'+t.info.outlay+'<span class="fs-75"> '+lang.rub+'</span></div>\t\t\t\t\t\t<span class="desc">'+lang.outlay+"</span>\t\t\t\t\t"),t.info["outlay-next"]&&$('[data-section="level-outlay"]').append('\t\t\t\t\t\t\t<span class="d-block m-t-7">\t\t\t\t\t\t\t\t<span class="levels-profit" data-toggle="tooltip" data-placement="bottom" data-original-title="'+lang["outlay-next"]+'"><i class="fal fa-long-arrow-up"></i> '+core.main.num(Number(t.info.outlay)+Number(t.info["outlay-next"]))+"‬ "+lang["rub-abr"]+"</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t"),$('[data-section="level-day"]').html('\t\t\t\t\t\t<div class="h4 mb-1 fw-500 f-oswald">'+core.main.num(86400*Number(t.info.second))+'<span class="fs-75"> '+lang.rub+'</span></div>\t\t\t\t\t\t<span class="desc">'+lang["in-day"]+"</span>\t\t\t\t\t"),t["day-next"]&&$('[data-section="level-day"]').append('\t\t\t\t\t\t\t<span class="d-block m-t-7">\t\t\t\t\t\t\t\t<span class="levels-profit" data-toggle="tooltip" data-placement="bottom" data-original-title="'+lang["in-day-next"]+'"><i class="fal fa-long-arrow-up"></i> '+core.main.num(Number(t["day-next"]))+" "+lang["rub-abr"]+"</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t"),$('[data-section="level-month"]').html('\t\t\t\t\t\t<div class="h4 mb-1 fw-500 f-oswald">'+core.main.num(2592e3*Number(t.info.second))+'<span class="fs-75"> '+lang.rub+'</span></div>\t\t\t\t\t\t<span class="desc">'+lang["in-month"]+"</span>\t\t\t\t\t"),t["month-next"]&&$('[data-section="level-month"]').append('\t\t\t\t\t\t\t<span class="d-block m-t-7">\t\t\t\t\t\t\t\t<span class="levels-profit" data-toggle="tooltip" data-placement="bottom" data-original-title="'+lang["in-month-next"]+'"><i class="fal fa-long-arrow-up"></i> '+core.main.num(Number(t["month-next"]))+" "+lang["rub-abr"]+"</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t"),$("[data-level-limit-current]").attr("data-level-limit-current",t.info.current).html(core.main.num(t.info.current)),$('[data-section="level-limit-max"]').html(core.main.num(t.info.limit)),$('[data-section="level-limit-line"]').css({width:Number(t.info.current)/Number(t.info.limit)*100+"%"}),$("[data-original-title]").tooltip(),swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})({type:"success",title:t.success}))}})}},$(document).ready(function(){public.levels.init()});
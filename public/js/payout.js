"undefined"==typeof public&&(public={}),public.payout={init:function(){$('.dt-content [data-target="#payout-modal"]').on("click",function(){$('#payout-modal form input[name="valute"]').val("");var t=$(this).attr("data-payment");$('#payout-modal input[name="payment"]').val(t),$('#payout-modal form input[name="wallet"]').val(global.wallets[t]||""),$('#payout-modal form input[name="amount"]').val("");var a=$(".dt-content .deposit-currency ul.card-header-pills li a[data-valute].active").attr("data-valute");$('#payout-modal input[name="valute"]').val(a),$("#payout-modal [data-valute-path]").hide(),$('#payout-modal [data-valute-path="'+a+'"]').show();var o=$(this).attr("data-name");$('#payout-modal [data-name="payment"]').html(o),$("#payout-modal .payout-img img").attr("src",$(this).find("img").attr("src"));var n="crypto"==a?o:a;$('#payout-modal [data-valute-path="'+a+'"] input[name="display"]').val("0.00 "+n);var e=$(this).attr("data-commission");$('#payout-modal input[name="amount"]').attr("data-commission",e);var r=$(this).attr("data-commission-fix");r?$('#payout-modal input[name="amount"]').attr("data-commission-fix",r):$('#payout-modal input[name="amount"]').removeAttr("data-commission-fix"),"crypto"==a?(e+=" "+o,$('#payout-modal [data-name="cur"]').html(global["currency-rate"][t])):(e+="%",r&&("rub"==a?e+=" + "+r+" rub.":"usd"==a?e+=" + "+r+" USD":"eur"==a&&(e+=" + "+r+" EUR"))),$('#payout-modal [data-name="commission"]').html(e);var u=$(this).attr("data-min");$('#payout-modal [data-name="min"]').html(u);var l=$(this).attr("data-example");$('#payout-modal input[name="wallet"]').attr("placeholder",l),public.payout.calc()}),$('#payout-modal input[name="amount"]').on("input",function(){public.payout.calc()}),$("#payout-modal form").on("submit",function(){$("#payout-modal form button").hasClass("disabled")||$("#payout-modal form button").hasClass("js-load")||public.payout.out()})},calc:function(){var t=$('#payout-modal input[name="valute"]').val(),a=$('#payout-modal input[name="payment"]').val(),o=Number($('#payout-modal input[name="amount"]').val()),n=Number($('#payout-modal input[name="amount"]').attr("data-commission")),e=Number($('#payout-modal input[name="amount"]').attr("data-commission-fix"));"rub"!=t&&(o/="crypto"==t?global["currency-rate"][a]:global["currency-rate"][t]);var r="crypto"==t?10:2,u=t.toUpperCase();"crypto"==t?(u=a,o-=n):o-=o*(n/100),e&&(o-=e),o<0&&(o=0),$('#payout-modal input[name="'+t+'-display"]').val(core.main.num(o,r,"."," ",!1)+" "+u)},out:function(t){core.ajax({url:"/payout/out/code/"+(t||0),ident:"payout",form:"#payout-modal form",preloader:"#payout-modal form button",success:function(t){if(t&&t.code)return swal({title:lang["enter-code"],text:lang["enter-code-text"],input:"text",inputAttributes:{maxlength:4,autocomplete:"off",placeholder:lang["enter-code-plr"],required:!0},showCancelButton:!0,confirmButtonText:lang["btn-continue"],cancelButtonText:lang["btn-close"]}).then(function(t){t.value&&public.payout.out(t.value)});if(t&&t.balance)for(var a in t.balance)$('[data-balance="'+a+'"]').html(core.main.num(t.balance[a],2,"."));return t&&t.error?t.error["confirm-email"]?swal({type:"error",title:t.error["confirm-email-title"],text:t.error["confirm-email"],confirmButtonText:t.error["go-settings"],preConfirm:function(){return location.href="/settings"}}):t.error["confirm-code"]?swal({type:"error",title:t.error["confirm-code-title"],html:t.error["confirm-code"],confirmButtonText:t.error["go-settings"],preConfirm:function(){return location.href="/settings"}}):swal({type:"error",html:t.error}):($("#payout-modal .close").click(),t&&t.warning?swal({type:"warning",text:t.warning}):t&&t.success?swal({type:"success",text:t.success}):void 0)}})}},$(document).ready(function(){public.payout.init()});
"undefined"==typeof public&&(public={}),public.statistics={init:function(){var t='"Oswald", sans-serif';Chart.defaults.global.defaultFontFamily=t;var e={labels:global.stat.labels,datasets:[{label:lang.payout,data:global.stat.inout.payout,backgroundColor:"rgba(239,153,27,.1)",borderWidth:3,borderColor:"#ef991b",hoverBorderWidth:0,pointBorderWidth:0,pointHoverBorderWidth:0,pointBackgroundColor:"#ef991b",pointRadius:2},{label:lang.fill,data:global.stat.inout.fill,backgroundColor:"rgba(214,31,31,.1)",borderWidth:3,borderColor:"#d61f1f",hoverBorderWidth:0,pointBorderWidth:0,pointHoverBorderWidth:0,pointBackgroundColor:"#d61f1f",pointRadius:2}]};new Chart(document.getElementById("stat-moneychart"),{type:"line",data:e,options:{responsive:!0,legend:{display:!1},layout:{padding:{top:0,left:0,right:0,bottom:0}},tooltips:{titleFontColor:"#fff",bodyFontColor:"#fff",titleFontSize:12,bodyFontSize:12,callbacks:{label:function(t,e){return e.datasets[t.datasetIndex].label+": "+e.datasets[t.datasetIndex].data[t.index]+" "+lang.rub}}},scales:{xAxes:[{gridLines:{display:!1},display:!0,categoryPercentage:1,barPercentage:.6,ticks:{fontColor:"#868686",fontSize:10}}],yAxes:[{gridLines:{display:!0,color:"#ededed",zeroLineColor:"#ededed"},display:!0,ticks:{fontColor:"#868686",fontSize:10,suggestedMin:5e5}}]}}});t='"Oswald", sans-serif';Chart.defaults.global.defaultFontFamily=t;e={labels:global.stat.labels,datasets:[{label:lang.signup,backgroundColor:"rgba(214,31,31,.1)",borderWidth:3,borderColor:"#d61f1f",hoverBorderWidth:0,pointBorderWidth:0,pointHoverBorderWidth:0,pointBackgroundColor:"#d61f1f",pointRadius:2,data:global.stat.inout.users}]};new Chart(document.getElementById("stat-userchart"),{type:"line",data:e,options:{responsive:!0,legend:{display:!1},layout:{padding:{top:0,left:0,right:0,bottom:0}},tooltips:{titleFontColor:"#fff",bodyFontColor:"#fff",titleFontSize:12,bodyFontSize:12},scales:{xAxes:[{gridLines:{display:!1},display:!0,categoryPercentage:1,barPercentage:.6,ticks:{fontColor:"#868686",fontSize:10}}],yAxes:[{gridLines:{display:!0,color:"#ededed",zeroLineColor:"#ededed"},display:!0,ticks:{fontColor:"#868686",fontSize:10,suggestedMin:500}}]}}}),core.timeout.set(function(){public.statistics.refresh("fill")},5e3,"fill-refresh"),core.timeout.set(function(){public.statistics.refresh("payout")},5e3,"payout-refresh")},refresh:function(a){var t=$("#stat-last-"+a+" tbody tr[data-sort]:first").attr("data-sort");core.ajax({url:"/statistics/last-"+a+"/sort/"+t,ident:"last"+a,success:function(t){if(t&&t.list)for(var e in t.list){$("#stat-last-"+a+" tbody").prepend('\t\t\t\t\t\t\t<tr data-sort="'+t.list[e].sort+'" class="new">\t\t\t\t\t\t\t\t<td>\t\t\t\t\t\t\t\t\t<a href="/profile/'+t.list[e].login+'" target="_blank">'+t.list[e].login+"</a>\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t<td>"+t.list[e].datetime+"</td>\t\t\t\t\t\t\t\t<td>"+t.list[e].amount+" <span>"+t.rub+"</span></td>\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t"),$("#stat-last-"+a+" tbody tr[data-sort]:last").remove();var o=t.list[e].sort;public.statistics.clear(a,o)}},complete:function(){core.timeout.set(function(){public.statistics.refresh(a)},5e3,a+"-refresh")}})},clear:function(t,e){core.timeout.set(function(){$("#stat-last-"+t+' tbody tr[data-sort="'+e+'"]').removeClass("new")},1e4)}},$(document).ready(function(){public.statistics.init()});